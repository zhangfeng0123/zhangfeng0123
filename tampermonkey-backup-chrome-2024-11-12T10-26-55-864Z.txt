{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"res","options":{"check_for_updates":true,"user_modified":1731406294794,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["https://25825.sh.absoloop.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","orig_run_in":[],"orig_tags":[],"use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]}},"storage":{"ts":1731038582960,"data":{}},"enabled":true,"position":1,"file_url":"https://update.greasyfork.org/scripts/476072/markVIP.user.js","uuid":"6ec2a086-4d1a-4dbf-a9c3-d4f1c84e852d","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICByZXMKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vbWFya1ZJUC50YW96aGl5dS5naXRodWIuaW8vCi8vIEB2ZXJzaW9uICAgICAgMC4xCi8vIEBkZXNjcmlwdGlvbiAgVklQIGZvciBtYXhpYW5nCi8vIEBhdXRob3IgICAgICAg5byg5bOwCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly8yNTgyNS5zaC5hYnNvbG9vcC5jb20vKgovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy80NTU5NDMtYWpheGhvb2tlci9jb2RlL2FqYXhIb29rZXIuanM/dmVyc2lvbj0xMTI0NDM1Ci8vIEBncmFudCAgICAgICAgbm9uZQovLyBAbGljZW5zZSAgICAgIFdURlBMCi8vIEBkb3dubG9hZFVSTCBodHRwczovL3VwZGF0ZS5ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzQ3NjA3Mi9tYXJrVklQLnVzZXIuanMKLy8gQHVwZGF0ZVVSTCBodHRwczovL3VwZGF0ZS5ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzQ3NjA3Mi9tYXJrVklQLm1ldGEuanMKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBjb25zb2xlLmxvZygn6ISa5pys6Kem5Y+RJyk7CiAgICAvLyDliJ3lp4vljJbnmbvlvZXnirbmgIEKICAgIGxldCBpc0xvZ2dlZEluID0gZmFsc2U7CgogICAgLy8g5Yib5bu65bm25pi+56S655m75b2V55WM6Z2iCiAgICBmdW5jdGlvbiBzaG93TG9naW5Qcm9tcHQoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ+aJp+ihjOeZu+mZhicpOwogICAgICAgIGNvbnN0IGxvZ2luRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgbG9naW5EaXYuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwogICAgICAgIGxvZ2luRGl2LnN0eWxlLnRvcCA9ICc1MCUnOwogICAgICAgIGxvZ2luRGl2LnN0eWxlLmxlZnQgPSAnNTAlJzsKICAgICAgICBsb2dpbkRpdi5zdHlsZS53aWR0aCA9ICczMDBweCc7CiAgICAgICAgbG9naW5EaXYuc3R5bGUuaGVpZ2h0ID0gJzQwMHB4JzsKICAgICAgICBsb2dpbkRpdi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgIGxvZ2luRGl2LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7CiAgICAgICAgbG9naW5EaXYuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInOwogICAgICAgIGxvZ2luRGl2LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknOwogICAgICAgIGxvZ2luRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd3aGl0ZSc7CiAgICAgICAgbG9naW5EaXYuc3R5bGUucGFkZGluZyA9ICcyMHB4JzsKICAgICAgICBsb2dpbkRpdi5zdHlsZS5ib3hTaGFkb3cgPSAnMCAwIDEwcHggcmdiYSgwLCAwLCAwLCAwLjUpJzsKICAgICAgICBsb2dpbkRpdi5zdHlsZS56SW5kZXggPSAxMDAwOwoKICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpOwogICAgICAgIGZvcm0ub25zdWJtaXQgPSBoYW5kbGVMb2dpbjsKCiAgICAgICAgY29uc3QgdXNlcm5hbWVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgICAgICAgdXNlcm5hbWVMYWJlbC50ZXh0Q29udGVudCA9ICdVc2VybmFtZTogJzsKICAgICAgICBjb25zdCB1c2VybmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICB1c2VybmFtZUlucHV0LnR5cGUgPSAndGV4dCc7CiAgICAgICAgdXNlcm5hbWVJbnB1dC5uYW1lID0gJ3VzZXJuYW1lJzsKICAgICAgICB1c2VybmFtZUlucHV0LnJlcXVpcmVkID0gdHJ1ZTsKCiAgICAgICAgY29uc3QgcGFzc3dvcmRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgICAgICAgcGFzc3dvcmRMYWJlbC50ZXh0Q29udGVudCA9ICdQYXNzd29yZDogJzsKICAgICAgICBjb25zdCBwYXNzd29yZElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICBwYXNzd29yZElucHV0LnR5cGUgPSAncGFzc3dvcmQnOwogICAgICAgIHBhc3N3b3JkSW5wdXQubmFtZSA9ICdwYXNzd29yZCc7CiAgICAgICAgcGFzc3dvcmRJbnB1dC5yZXF1aXJlZCA9IHRydWU7CgogICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgIHN1Ym1pdEJ1dHRvbi50eXBlID0gJ3N1Ym1pdCc7CiAgICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ0xvZ2luJzsKCiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZCh1c2VybmFtZUxhYmVsKTsKICAgICAgICBmb3JtLmFwcGVuZENoaWxkKHVzZXJuYW1lSW5wdXQpOwogICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKSk7CiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChwYXNzd29yZExhYmVsKTsKICAgICAgICBmb3JtLmFwcGVuZENoaWxkKHBhc3N3b3JkSW5wdXQpOwogICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKSk7CiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChzdWJtaXRCdXR0b24pOwoKICAgICAgICBsb2dpbkRpdi5hcHBlbmRDaGlsZChmb3JtKTsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxvZ2luRGl2KTsKICAgIH0KICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgbGV0IGxvZ2luU3RhdHVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJEYXRhJykKICAgICAgICBpZighbG9naW5TdGF0dXMpewoKICAgICAgICAgICAgc2hvd0xvZ2luUHJvbXB0KCk7fQogICAgfSwgMTAwMCk7CgogICAgLy8g5aSE55CG55m75b2V6YC76L6RCiAgICBmdW5jdGlvbiBoYW5kbGVMb2dpbihldmVudCkgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgY29uc3QgZm9ybSA9IGV2ZW50LnRhcmdldDsKICAgICAgICBjb25zdCB1c2VybmFtZSA9IGZvcm0udXNlcm5hbWUudmFsdWU7CiAgICAgICAgY29uc3QgcGFzc3dvcmQgPSBmb3JtLnBhc3N3b3JkLnZhbHVlOwoKICAgICAgICAvLyDov5nph4zlupTor6XmmK/pqozor4HnlKjmiLflh63mja7nmoTpgLvovpEKICAgICAgICAvLyDkvovlpoLvvIzpgJrov4cgQUpBWCDor7fmsYLlj5HpgIHliLDmnI3liqHlmajov5vooYzpqozor4EKICAgICAgICAvLyDnlLHkuo7ov5nmmK/kuIDkuKrnpLrkvovvvIzmiJHku6znm7TmjqXlgYforr7nlKjmiLflkI3mmK8gImFkbWluIiDkuJTlr4bnoIHmmK8gInBhc3N3b3JkIgogICAgICAgIGlmICh1c2VybmFtZSA9PT0gJ2FkbWluJyAmJiBwYXNzd29yZCA9PT0gJ3Bhc3N3b3JkJykgewogICAgICAgICAgICBpc0xvZ2dlZEluID0gdHJ1ZTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChmb3JtLnBhcmVudEVsZW1lbnQpOyAvLyDnp7vpmaTnmbvlvZXnlYzpnaIKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJEYXRhJyxpc0xvZ2dlZEluKQogICAgICAgICAgICBzdGFydEFqYXhIb29raW5nKCk7IC8vIOWQr+WKqCBBSkFYIOaLpuaIqgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KCdJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkJyk7CiAgICAgICAgfQogICAgfQoKICAgIC8qIGdsb2JhbCBhamF4SG9va2VyKi8KICAgIGZ1bmN0aW9uIHN0YXJ0QWpheEhvb2tpbmcoKSB7CiAgICAgICAgaWYgKGlzTG9nZ2VkSW4pIHsKICAgICAgICAgICAgbGV0IGxhc3RQcm9jZXNzZWRNc2dJZCA9IG51bGw7CiAgICAgICAgICAgIGFqYXhIb29rZXIuaG9vayhyZXF1ZXN0ID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnVybC5pbmNsdWRlcygnL1Zpc2l0b3JzJykgJiYgIXJlcXVlc3QudXJsLmluY2x1ZGVzKCcvTWVzc2FnZXMnKSkgewogICAgICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzcG9uc2UgPSByZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShyZXMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xhc3RDaGF0TWVzc2FnZScsIGpzb24ubGFzdENoYXRNZXNzYWdlLCByZXMpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbiAmJiBqc29uWzBdLmxhc3RDaGF0TWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xhc3RDaGF0TWVzc2FnZScsIGpzb25bMF0sIGpzb25bMF0ubGFzdENoYXRNZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50TXNnSWQgPSBqc29uWzBdLmxhc3RDaGF0TWVzc2FnZS5tc2dJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50TXNnSWQgIT09IGxhc3RQcm9jZXNzZWRNc2dJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQcm9jZXNzZWRNc2dJZCA9IGN1cnJlbnRNc2dJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudE1zZ0lkJywgY3VycmVudE1zZ0lkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5L2/55So6Kej5p6Q5Ye655qE5pWw5o2u5bu656uLIFdlYlNvY2tldCDov57mjqUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3c1VybCA9ICd3c3M6Ly9ib3QtYXBpLXRzLmJpbGxpb25jb25uZWN0Lm5ldC9jaGF0X2NvbXBsZXRpb24nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvY2tldCA9IG5ldyBXZWJTb2NrZXQod3NVcmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGlzIG9wZW4gbm93LicsIGpzb25bMF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQuc2VuZChgeyJxIjoiJHtqc29uWzBdLmxhc3RDaGF0TWVzc2FnZS5ib2R5LmJvZGllc1swXS5tc2d9IiwidXNlcl9pZCI6IjEyMyIsImJvdCI6Im1hbGxfaDUiLCJzdHJlYW0iOnRydWUsInNvdXJjZSI6ImRlZmF1bHQiLCJuZXdfdGhyZWFkIjogZmFsc2V9YCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJzZURhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VEYXRhLmZpbmlzaCAmJiBjdXJyZW50TXNnSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluamVjdERpdkJlbG93VGFyZ2V0KHBhcnNlRGF0YS5tc2cuY29udGVudCwgY3VycmVudE1zZ0lkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgbWVzc2FnZSByZWNlaXZlZDrmtojmga/kuLonLCBwYXJzZURhdGEsIGRvY3VtZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBpcyBjbG9zZWQgbm93LicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5vbmVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGVycm9yIG9ic2VydmVkOicsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfmiqXplJnkuoYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCgoKCiAgICAvLyDms6jlhaXmtojmga/liLDpobXpnaLkuK3nmoTlh73mlbDvvIjkv53mjIHkuI3lj5jvvIkKICAgIGZ1bmN0aW9uIGluamVjdERpdkJlbG93VGFyZ2V0KG1zZywgaWQpIHsKICAgICAgICBjb25zdCBhbGxQcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3AnKTsKICAgICAgICBsZXQgdGFyZ2V0RWxlbWVudCA9IG51bGw7CiAgICAgICAgZm9yIChsZXQgcCBvZiBhbGxQcykgewogICAgICAgICAgICBpZiAocC50ZXh0Q29udGVudC50cmltKCkgPT09IGlkKSB7CiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50ID0gcDsKICAgICAgICAgICAgICAgIGJyZWFrOyAvLyDmib7liLDlkI7pgIDlh7rlvqrnjq8KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5om+5Yiw5LqG55uu5qCH5YWD57SgCiAgICAgICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7CiAgICAgICAgICAgIGNvbnNvbGUud2Fybign5pyq5om+5Yiw5YaF5a655Li6IGlkIOeahCBwIOWFg+e0oCcpOwogICAgICAgICAgICByZXR1cm47IC8vIOiLpeacquaJvuWIsO+8jOWImeS4jeaJp+ihjOWQjue7reaTjeS9nAogICAgICAgIH0KICAgICAgICBjb25zdCB0YXJnZXRFbGVtZW50UGFyZW50ID0gdGFyZ2V0RWxlbWVudC5wYXJlbnRFbGVtZW50OwogICAgICAgIGlmICghdGFyZ2V0RWxlbWVudFBhcmVudCkgewogICAgICAgICAgICBjb25zb2xlLndhcm4oJ+ebruaghyBwIOWFg+e0oOeahOeItuWFg+e0oOS4jeWtmOWcqCcpOwogICAgICAgICAgICByZXR1cm47IC8vIOiLpeeItuWFg+e0oOS4jeWtmOWcqO+8jOWImeS4jeaJp+ihjOWQjue7reaTjeS9nAogICAgICAgIH0KICAgICAgICAvLyDliJvlu7rkuIDkuKrmlrDnmoQgZGl2IOWFg+e0oAogICAgICAgIGNvbnN0IG5ld0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIG5ld0Rpdi50ZXh0Q29udGVudCA9IG1zZzsKCiAgICAgICAgLy8g6K6+572u5pawIGRpdiDnmoTmoLflvI/vvIjlj6/pgInvvIkKICAgICAgICBuZXdEaXYuc3R5bGUubWFyZ2luVG9wID0gJzIwcHgnOyAvLyDmoLnmja7pnIDopoHmt7vliqDkuIrovrnot50KICAgICAgICBuZXdEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM5OTk5OTknOwogICAgICAgIG5ld0Rpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICBuZXdEaXYuc3R5bGUubWF4V2lkdGggPSAnOTAlJzsKICAgICAgICAvLyDlj6/ku6Xmt7vliqDmm7TlpJrmoLflvI8uLi4KCiAgICAgICAgLy8g5bCG5pawIGRpdiDmj5LlhaXliLDnm67moIflhYPntKDnmoTkuIvkuIDkuKrlhYTlvJ/oioLngrnkvY3nva4KICAgICAgICAvLyDkvb/nlKggaW5zZXJ0QWRqYWNlbnRFbGVtZW50IOaWueazle+8jCdhZnRlcmVuZCcg6KGo56S65o+S5YWl5Yiw55uu5qCH5YWD57Sg5LmL5ZCOCiAgICAgICAgdGFyZ2V0RWxlbWVudFBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgbmV3RGl2KTsKICAgIH0KfSkoKTs=","requires":[{"meta":{"name":"ajaxHooker.js","url":"https://greasyfork.org/scripts/455943-ajaxhooker/code/ajaxHooker.js?version=1124435","ts":1731038584886,"mimetype":"text/javascript"},"source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBhamF4SG9va2VyCi8vIEBhdXRob3IgICAgICAgY3h4amFja2llCi8vIEB2ZXJzaW9uICAgICAgMS4xLjEKLy8gQHN1cHBvcnRVUkwgICBodHRwczovL2Jicy50YW1wZXJtb25rZXkubmV0LmNuL3RocmVhZC0zMjg0LTEtMS5odG1sCi8vID09L1VzZXJTY3JpcHQ9PQoKdmFyIGFqYXhIb29rZXIgPSBmdW5jdGlvbigpIHsKICAgIGNvbnN0IHdpbiA9IHdpbmRvdy51bnNhZmVXaW5kb3cgfHwgZG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93OwogICAgY29uc3QgaG9va0ZucyA9IFtdOwogICAgY29uc3QgeGhyUHJvdG8gPSB3aW4uWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlOwogICAgY29uc3QgeGhyUHJvdG9EZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoeGhyUHJvdG8pOwogICAgY29uc3QgeGhyUmVhZHlTdGF0ZSA9IHhoclByb3RvRGVzYy5yZWFkeVN0YXRlLmdldDsKICAgIGNvbnN0IHJlc1Byb3RvID0gd2luLlJlc3BvbnNlLnByb3RvdHlwZTsKICAgIGNvbnN0IHJlYWxYaHJPcGVuID0geGhyUHJvdG8ub3BlbjsKICAgIGNvbnN0IHJlYWxYaHJTZW5kID0geGhyUHJvdG8uc2VuZDsKICAgIGNvbnN0IHJlYWxGZXRjaCA9IHdpbi5mZXRjaDsKICAgIGNvbnN0IHhoclJlc3BvbnNlcyA9IFsncmVzcG9uc2UnLCAncmVzcG9uc2VUZXh0JywgJ3Jlc3BvbnNlWE1MJ107CiAgICBjb25zdCBmZXRjaFJlc3BvbnNlcyA9IFsnYXJyYXlCdWZmZXInLCAnYmxvYicsICdmb3JtRGF0YScsICdqc29uJywgJ3RleHQnXTsKICAgIGZ1bmN0aW9uIGVtcHR5Rm4oKSB7fQogICAgZnVuY3Rpb24gcmVhZE9ubHkob2JqLCBwcm9wLCB2YWx1ZSA9IG9ialtwcm9wXSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIHsKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgICBnZXQ6ICgpID0+IHZhbHVlLAogICAgICAgICAgICBzZXQ6IGVtcHR5Rm4KICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIHdyaXRhYmxlKG9iaiwgcHJvcCwgdmFsdWUgPSBvYmpbcHJvcF0pIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCB7CiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gZmFrZVhock9wZW4obWV0aG9kLCB1cmwsIC4uLmFyZ3MpIHsKICAgICAgICBjb25zdCB4aHIgPSB0aGlzOwogICAgICAgIHhoci5fX2FqYXhIb29rZXIgPSB4aHIuX19hamF4SG9va2VyIHx8IHtoZWFkZXJzOiB7fX07CiAgICAgICAgeGhyLl9fYWpheEhvb2tlci51cmwgPSB1cmw7CiAgICAgICAgeGhyLl9fYWpheEhvb2tlci5tZXRob2QgPSBtZXRob2QudG9VcHBlckNhc2UoKTsKICAgICAgICB4aHIuX19hamF4SG9va2VyLnJlbWFpbkFyZ3MgPSBhcmdzOwogICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyID0gKGhlYWRlciwgdmFsdWUpID0+IHsKICAgICAgICAgICAgeGhyLl9fYWpheEhvb2tlci5oZWFkZXJzW2hlYWRlcl0gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgICAgeGhyUmVzcG9uc2VzLmZvckVhY2gocHJvcCA9PiB7CiAgICAgICAgICAgIGRlbGV0ZSB4aHJbcHJvcF07IC8vIGRlbGV0ZSBkZXNjcmlwdG9yCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlYWxYaHJPcGVuLmNhbGwoeGhyLCBtZXRob2QsIHVybCwgLi4uYXJncyk7CiAgICB9CiAgICBmdW5jdGlvbiBmYWtlWGhyU2VuZChkYXRhKSB7CiAgICAgICAgY29uc3QgeGhyID0gdGhpczsKICAgICAgICBjb25zdCByZXEgPSB4aHIuX19hamF4SG9va2VyOwogICAgICAgIGlmICh4aHJSZWFkeVN0YXRlLmNhbGwoeGhyKSA9PT0gMSAmJiByZXEpIHsKICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHsKICAgICAgICAgICAgICAgIHR5cGU6ICd4aHInLAogICAgICAgICAgICAgICAgdXJsOiByZXEudXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiByZXEubWV0aG9kLAogICAgICAgICAgICAgICAgYWJvcnQ6IGZhbHNlLAogICAgICAgICAgICAgICAgaGVhZGVyczogcmVxLmhlYWRlcnMsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVzcG9uc2U6IG51bGwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZm9yIChjb25zdCBmbiBvZiBob29rRm5zKSB7CiAgICAgICAgICAgICAgICBmbihyZXF1ZXN0KTsKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LmFib3J0KSByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVhbFhock9wZW4uY2FsbCh4aHIsIHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgLi4ucmVxLnJlbWFpbkFyZ3MpOwogICAgICAgICAgICBkYXRhID0gcmVxdWVzdC5kYXRhOwogICAgICAgICAgICBmb3IgKGNvbnN0IGhlYWRlciBpbiByZXF1ZXN0LmhlYWRlcnMpIHsKICAgICAgICAgICAgICAgIHhoclByb3RvLnNldFJlcXVlc3RIZWFkZXIuY2FsbCh4aHIsIGhlYWRlciwgcmVxdWVzdC5oZWFkZXJzW2hlYWRlcl0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdC5yZXNwb25zZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgY29uc3QgYXJnID0ge307CiAgICAgICAgICAgICAgICB4aHJSZXNwb25zZXMuZm9yRWFjaChwcm9wID0+IHsKICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoeGhyLCBwcm9wLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyUmVhZHlTdGF0ZS5jYWxsKHhocikgPT09IDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISgnZmluYWxVcmwnIGluIGFyZykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnLmZpbmFsVXJsID0geGhyLnJlc3BvbnNlVVJMOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmcuc3RhdHVzID0geGhyLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnLnJlc3BvbnNlSGVhZGVycyA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnIgPSB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkudHJpbSgpLnNwbGl0KC9bXHJcbl0rLyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBhcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgvOlxzKi8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxoZWFkZXIgPSBwYXJ0c1swXS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaGVhZGVyIGluIGFyZy5yZXNwb25zZUhlYWRlcnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnLnJlc3BvbnNlSGVhZGVyc1tsaGVhZGVyXSArPSAnLCAnICsgcGFydHNbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnLnJlc3BvbnNlSGVhZGVyc1tsaGVhZGVyXSA9IHBhcnRzWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwcm9wIGluIGFyZykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnW3Byb3BdID0geGhyUHJvdG9EZXNjW3Byb3BdLmdldC5jYWxsKHhocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzcG9uc2UoYXJnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvcCBpbiBhcmcgPyBhcmdbcHJvcF0gOiB4aHJQcm90b0Rlc2NbcHJvcF0uZ2V0LmNhbGwoeGhyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlYWxYaHJTZW5kLmNhbGwoeGhyLCBkYXRhKTsKICAgIH0KICAgIGZ1bmN0aW9uIGhvb2tGZXRjaFJlc3BvbnNlKHJlc3BvbnNlLCBhcmcsIGNhbGxiYWNrKSB7CiAgICAgICAgZmV0Y2hSZXNwb25zZXMuZm9yRWFjaChwcm9wID0+IHsKICAgICAgICAgICAgcmVzcG9uc2VbcHJvcF0gPSAoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgICAgICByZXNQcm90b1twcm9wXS5jYWxsKHJlc3BvbnNlKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEocHJvcCBpbiBhcmcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ1twcm9wXSA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwcm9wIGluIGFyZyA/IGFyZ1twcm9wXSA6IHJlcyk7CiAgICAgICAgICAgICAgICB9LCByZWplY3QpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIGZha2VGZXRjaCh1cmwsIGluaXQpIHsKICAgICAgICBpZiAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycgfHwgdXJsIGluc3RhbmNlb2YgU3RyaW5nKSB7CiAgICAgICAgICAgIGluaXQgPSBpbml0IHx8IHt9OwogICAgICAgICAgICBpbml0LmhlYWRlcnMgPSBpbml0LmhlYWRlcnMgfHwge307CiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7CiAgICAgICAgICAgICAgICB0eXBlOiAnZmV0Y2gnLAogICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICBtZXRob2Q6IChpbml0Lm1ldGhvZCB8fCAnR0VUJykudG9VcHBlckNhc2UoKSwKICAgICAgICAgICAgICAgIGFib3J0OiBmYWxzZSwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHt9LAogICAgICAgICAgICAgICAgZGF0YTogaW5pdC5ib2R5LAogICAgICAgICAgICAgICAgcmVzcG9uc2U6IG51bGwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKGluaXQuaGVhZGVycy50b1N0cmluZygpID09PSAnW29iamVjdCBIZWFkZXJzXScpIHsKICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiBpbml0LmhlYWRlcnMpIHsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnNba2V5XSA9IHZhbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlcXVlc3QuaGVhZGVycyA9IHsuLi5pbml0LmhlYWRlcnN9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAoY29uc3QgZm4gb2YgaG9va0ZucykgewogICAgICAgICAgICAgICAgZm4ocmVxdWVzdCk7CiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5hYm9ydCkgcmV0dXJuIFByb21pc2UucmVqZWN0KCdhYm9ydGVkJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdXJsID0gcmVxdWVzdC51cmw7CiAgICAgICAgICAgIGluaXQubWV0aG9kID0gcmVxdWVzdC5tZXRob2Q7CiAgICAgICAgICAgIGluaXQuaGVhZGVycyA9IHJlcXVlc3QuaGVhZGVyczsKICAgICAgICAgICAgaW5pdC5ib2R5ID0gcmVxdWVzdC5kYXRhOwogICAgICAgICAgICBpZiAodHlwZW9mIHJlcXVlc3QucmVzcG9uc2UgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVhbEZldGNoLmNhbGwod2luLCB1cmwsIGluaXQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbFVybDogcmVzcG9uc2UudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlcnM6IHt9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiByZXNwb25zZS5oZWFkZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmcucmVzcG9uc2VIZWFkZXJzW2tleV0gPSB2YWw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaG9va0ZldGNoUmVzcG9uc2UocmVzcG9uc2UsIGFyZywgcmVxdWVzdC5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmNsb25lID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzQ2xvbmUgPSByZXNQcm90by5jbG9uZS5jYWxsKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tGZXRjaFJlc3BvbnNlKHJlc0Nsb25lLCBhcmcsIHJlcXVlc3QucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc0Nsb25lOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlYWxGZXRjaC5jYWxsKHdpbiwgdXJsLCBpbml0KTsKICAgIH0KICAgIHhoclByb3RvLm9wZW4gPSBmYWtlWGhyT3BlbjsKICAgIHhoclByb3RvLnNlbmQgPSBmYWtlWGhyU2VuZDsKICAgIHdpbi5mZXRjaCA9IGZha2VGZXRjaDsKICAgIHJldHVybiB7CiAgICAgICAgaG9vazogZm4gPT4gaG9va0Zucy5wdXNoKGZuKSwKICAgICAgICBwcm90ZWN0OiAoKSA9PiB7CiAgICAgICAgICAgIHJlYWRPbmx5KHdpbiwgJ1hNTEh0dHBSZXF1ZXN0Jyk7CiAgICAgICAgICAgIHJlYWRPbmx5KHhoclByb3RvLCAnb3BlbicpOwogICAgICAgICAgICByZWFkT25seSh4aHJQcm90bywgJ3NlbmQnKTsKICAgICAgICAgICAgcmVhZE9ubHkod2luLCAnZmV0Y2gnKTsKICAgICAgICB9LAogICAgICAgIHVuaG9vazogKCkgPT4gewogICAgICAgICAgICB3cml0YWJsZSh3aW4sICdYTUxIdHRwUmVxdWVzdCcpOwogICAgICAgICAgICB3cml0YWJsZSh4aHJQcm90bywgJ29wZW4nLCByZWFsWGhyT3Blbik7CiAgICAgICAgICAgIHdyaXRhYmxlKHhoclByb3RvLCAnc2VuZCcsIHJlYWxYaHJTZW5kKTsKICAgICAgICAgICAgd3JpdGFibGUod2luLCAnZmV0Y2gnLCByZWFsRmV0Y2gpOwogICAgICAgIH0KICAgIH07Cn0oKTs="}]}]}